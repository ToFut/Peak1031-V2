<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PracticePanther OAuth Debug</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .url-box { background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 10px 0; word-break: break-all; }
        .error-box { background: #ffebee; border: 1px solid #f44336; padding: 15px; border-radius: 5px; margin: 10px 0; }
        button { background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #45a049; }
        .debug-info { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üîç PracticePanther OAuth Debug Tool</h1>
    
    <div class="debug-info">
        <h3>üìã Instructions:</h3>
        <ol>
            <li><strong>Open Browser Dev Tools</strong> (F12)</li>
            <li><strong>Go to Network tab</strong></li>
            <li><strong>Click a test button below</strong></li>
            <li><strong>Check Network tab</strong> for failed requests</li>
            <li><strong>Copy the error response</strong></li>
        </ol>
    </div>

    <h3>üß™ Test URLs:</h3>
    
    <div>
        <h4>Test 1: Minimal URL (Check if client_id is valid)</h4>
        <div class="url-box" id="url1"></div>
        <button onclick="testUrl1()">Test Minimal OAuth URL</button>
    </div>

    <div>
        <h4>Test 2: With localhost:8000 redirect</h4>
        <div class="url-box" id="url2"></div>
        <button onclick="testUrl2()">Test localhost:8000</button>
    </div>

    <div>
        <h4>Test 3: With 127.0.0.1:8000 redirect</h4>
        <div class="url-box" id="url3"></div>
        <button onclick="testUrl3()">Test 127.0.0.1:8000</button>
    </div>

    <div class="error-box">
        <h4>‚ö†Ô∏è Expected Behavior:</h4>
        <ul>
            <li><strong>If client_id is valid:</strong> You'll see PracticePanther login page or different error</li>
            <li><strong>If client_id is invalid:</strong> 400 error immediately</li>
            <li><strong>If redirect_uri not registered:</strong> "invalid_redirect_uri" error</li>
        </ul>
    </div>

    <script>
        const clientId = 'c1ba43b4-155b-4a69-90cb-55cf7f1e7f41';
        const baseUrl = 'https://app.practicepanther.com/oauth/authorize';
        
        function generateState() {
            return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
        }

        function testUrl1() {
            const url = `${baseUrl}?response_type=code&client_id=${clientId}`;
            document.getElementById('url1').textContent = url;
            console.log('Testing minimal URL:', url);
            window.open(url, '_blank');
        }

        function testUrl2() {
            const state = generateState();
            const redirectUri = 'http://localhost:8000/oauth/callback';
            const url = `${baseUrl}?response_type=code&client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&state=${state}`;
            document.getElementById('url2').textContent = url;
            console.log('Testing localhost:8000:', url);
            window.open(url, '_blank');
        }

        function testUrl3() {
            const state = generateState();
            const redirectUri = 'http://127.0.0.1:8000/oauth/callback';
            const url = `${baseUrl}?response_type=code&client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&state=${state}`;
            document.getElementById('url3').textContent = url;
            console.log('Testing 127.0.0.1:8000:', url);
            window.open(url, '_blank');
        }

        // Initialize URLs on page load
        window.onload = function() {
            testUrl1();
            testUrl2();
            testUrl3();
        }
    </script>
</body>
</html> 